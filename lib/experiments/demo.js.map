{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../../src/experiments/demo.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'PSPG/EXPERIMENTS/DEMO'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\n# FS                        = require 'fs'\nPATH                      = require 'path'\nSP                        = require 'steampipes'\n{ $\n  $async\n  select }                = SP.export()\ntypes                     = require '../types'\n{ isa\n  validate\n  declare\n  size_of\n  type_of }               = types\n#...........................................................................................................\nrequire                   '../exception-handler'\njoin_paths                = ( P... ) -> PATH.resolve PATH.join P...\nabspath                   = ( P... ) -> join_paths __dirname, P...\n{ to_width, width_of, }   = require 'to-width'\nPSPG                      = require '../..'\npath_1                    = abspath '../../src/experiments/test-data-1.tsv'\njr                        = JSON.stringify\n\n\n#-----------------------------------------------------------------------------------------------------------\n$split_tsv = ( names... ) ->\n  validate.list_of 'nonempty_text', names\n  pipeline = []\n  pipeline.push SP.$split()\n  pipeline.push $ ( line, send ) -> send line.split '\\t'\n  pipeline.push $ ( fields, send ) ->\n    d = {}\n    for field, idx in fields\n      d[ names[ idx ] ? \"field#{idx + 1}\" ] = field\n    send d\n  return SP.pull pipeline...\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_tabular_output = ->\n  return new Promise ( resolve ) =>\n    source    = SP.read_from_file path_1\n    pipeline  = []\n    pipeline.push source\n    pipeline.push $split_tsv 'fncr', 'glyph', 'formula'\n    pipeline.push @$add_random_words 10\n    pipeline.push @$add_ncrs()\n    pipeline.push @$add_numbers()\n    pipeline.push @$add_nulls()\n    pipeline.push @$reorder_fields()\n    pipeline.push PSPG.$tee_as_table -> resolve()\n    pipeline.push SP.$drain()\n    SP.pull pipeline...\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_many_rows = ->\n  return new Promise ( resolve ) =>\n    source    = SP.new_value_source @get_random_words 800\n    pipeline  = []\n    pipeline.push source\n    pipeline.push $ ( word, send ) -> send \"#{word} \".repeat CND.random_integer 1, 20\n    pipeline.push $ ( text, send ) -> send { text, }\n    pipeline.push PSPG.$tee_as_table -> resolve()\n    pipeline.push SP.$drain()\n    SP.pull pipeline...\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_tabular_output_with_different_shapes = ->\n  ### This is to demonstrate that when objects with different shapes—i.e. different sets of properties—are\n  tabulated, the columns displayed represent the union of all keys of all objects. ###\n  return new Promise ( resolve ) =>\n    source    = SP.read_from_file path_1\n    pipeline  = []\n    pipeline.push source\n    pipeline.push $split_tsv 'fncr', 'glyph', 'formula'\n    pipeline.push @$add_random_words 10\n    pipeline.push @$add_ncrs()\n    pipeline.push @$add_numbers()\n    pipeline.push @$reorder_fields()\n    pipeline.push @$drop_keys()\n    pipeline.push PSPG.$tee_as_table -> resolve()\n    pipeline.push SP.$drain()\n    SP.pull pipeline...\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_paged_output = ->\n  return new Promise ( resolve ) =>\n    source    = SP.read_from_file path_1\n    pipeline  = []\n    pipeline.push source\n    pipeline.push $split_tsv 'fncr', 'glyph', 'formula'\n    pipeline.push @$add_random_words 10\n    pipeline.push @$add_ncrs()\n    pipeline.push @$add_numbers()\n    pipeline.push @$reorder_fields()\n    pipeline.push @$as_line()\n    pipeline.push PSPG.$page_output -> resolve()\n    pipeline.push SP.$drain()\n    SP.pull pipeline...\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_csv_output = ->\n  return new Promise ( resolve ) =>\n    source    = SP.read_from_file path_1\n    pipeline  = []\n    pipeline.push source\n    pipeline.push $split_tsv 'fncr', 'glyph', 'formula'\n    pipeline.push @$add_random_words 10\n    pipeline.push @$add_ncrs()\n    pipeline.push @$add_numbers()\n    pipeline.push @$reorder_fields()\n    pipeline.push @$add_csv_header()\n    pipeline.push @$as_csv_line()\n    # pipeline.push SP.$watch ( d ) -> urge '^77766^', jr d\n    pipeline.push PSPG.$page_output { csv: true, }, -> resolve()\n    pipeline.push SP.$drain()\n    SP.pull pipeline...\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_key_value = ->\n  return new Promise ( resolve ) =>\n    source    = SP.read_from_file path_1\n    pipeline  = []\n    pipeline.push source\n    pipeline.push $split_tsv 'fncr', 'glyph', 'formula'\n    pipeline.push $ ( d, send ) -> send { key: d.glyph, value: d.formula, }\n    pipeline.push @$add_csv_header()\n    pipeline.push @$as_csv_line()\n    # pipeline.push SP.$watch ( d ) -> urge '^77766^', jr d\n    pipeline.push PSPG.$page_output { csv: true, }, -> resolve()\n    pipeline.push SP.$drain()\n    SP.pull pipeline...\n\n#-----------------------------------------------------------------------------------------------------------\n@$reorder_fields = -> $ ( row, send ) =>\n  { nr\n    fncr\n    nr2\n    glyph\n    glyph_ncr\n    nr3\n    formula\n    formula_ncr\n    bs }        = row\n  send { nr, fncr, nr2, glyph, glyph_ncr, nr3, formula, formula_ncr, bs, }\n\n#-----------------------------------------------------------------------------------------------------------\n@$add_ncrs = ->\n  return $ ( row, send ) =>\n    row.glyph_ncr   = to_width ( @text_as_ncrs row.glyph    ), 20\n    row.formula_ncr = to_width ( @text_as_ncrs row.formula  ), 20\n    send row\n\n#-----------------------------------------------------------------------------------------------------------\n@$add_numbers = ->\n  nr = 0\n  return $ ( row, send ) =>\n    nr             += +1\n    row.nr          = nr\n    row.nr2         = nr ** 2\n    row.nr3         = nr ** 3\n    send row\n\n#-----------------------------------------------------------------------------------------------------------\n@$add_nulls = ->\n  return $ ( row, send ) =>\n    switch row.nr\n      when 3 then delete row.glyph\n      when 4 then row.bs = null\n    send row\n\n#-----------------------------------------------------------------------------------------------------------\n@$drop_keys = ->\n  return $ ( row, send ) =>\n    keys  = ( key for key of row )\n    idx   = row.nr %% keys.length\n    key   = keys[ idx ]\n    send { \"#{key}\": row[ key ], }\n    # send row\n\n#-----------------------------------------------------------------------------------------------------------\n@text_as_ncrs = ( text ) ->\n  R = []\n  for chr in Array.from text\n    cid_hex = ( chr.codePointAt 0 ).toString 16\n    R.push \"&#x#{cid_hex};\"\n  return R.join ''\n\n#-----------------------------------------------------------------------------------------------------------\n@$add_random_words = ( n = 1 ) ->\n  validate.count n\n  CP    = require 'child_process'\n  count = Math.min 1e5, n * 1000\n  words = ( ( CP.execSync \"shuf -n #{count} /usr/share/dict/words\" ).toString 'utf-8' ).split '\\n'\n  words = ( word.replace /'s$/g, '' for word in words )\n  words = ( word for word in words when word isnt '' )\n  return $ ( fields, send ) =>\n    fields.bs = ( words[ CND.random_integer 0, count ] for _ in [ 0 .. n ] ).join ' '\n    send fields\n\n#-----------------------------------------------------------------------------------------------------------\n@get_random_words = ( n = 10 ) ->\n  validate.count n\n  CP    = require 'child_process'\n  words = ( ( CP.execSync \"shuf -n #{n} /usr/share/dict/words\" ).toString 'utf-8' ).split '\\n'\n  words = ( word.replace /'s$/g, '' for word in words )\n  words = ( word for word in words when word isnt '' )\n  return words\n\n#-----------------------------------------------------------------------------------------------------------\n@$as_line = -> $ ( d, send ) =>\n  d  = jr d unless isa.text d\n  d += '\\n' unless isa.line d\n  send d\n\n#-----------------------------------------------------------------------------------------------------------\nas_csv = ( x ) ->\n  x = x.toString() unless isa.text x\n  return '\"' + ( x.replace /\"/g, '\"\"' ) + '\"'\n\n#-----------------------------------------------------------------------------------------------------------\n@$add_csv_header = ->\n  is_first = true\n  return $ ( d, send ) =>\n    if is_first\n      is_first = false\n      send ( ( ( as_csv k ) for k, _ of d ).join ',' ) + '\\n'\n    else\n      send d\n    return null\n\n#-----------------------------------------------------------------------------------------------------------\n@$as_csv_line = -> $ ( d, send ) =>\n  return send d if isa.text d\n  send ( ( ( as_csv v ) for _, v of d ).join ',' ) + '\\n'\n\n\n############################################################################################################\nunless module.parent?\n  do =>\n    # await @demo_many_rows()\n    await @demo_tabular_output()\n    # await @demo_tabular_output_with_different_shapes()\n    # await @demo_paged_output()\n    await @demo_csv_output()\n    await @demo_key_value()\n\n\n"
  ]
}